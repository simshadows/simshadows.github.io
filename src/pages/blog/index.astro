---
import {getCollection} from "astro:content";

import Layout from "@layouts/BaseLayout.astro";
import {fm} from "@helpers/frontmatter";

import {
    postToFrontmatter,
    blogFrontmatterCmp,
} from "./_common/blog-frontmatter";

const allPosts = (await getCollection("blog")).map(postToFrontmatter);
allPosts.sort(blogFrontmatterCmp);

export const frontmatter = fm({
    title: "Sim's Blog",
    description: "Sim's blog.",
    keywords: ["blog"],
});
---

<Layout {...frontmatter}>

<h1>Blog</h1>

<p><a href="./archive/">Archive</a></p>

<p><em>This is an early WIP focused on experimenting with ways to manage my blog posts before migrating <a href="https://blog.simshadows.com/">my old blog</a> to this website.</em></p>

{
    allPosts.map((post) => (
        <p><a href={post.urlAbsolutePath}>{post.frontmatter.title}</a></p>
    ))
}

</Layout>

